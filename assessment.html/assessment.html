<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบประเมินหมู่บ้านด้านสิ่งแวดล้อมที่เอื้อต่อสุขภาพ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Sarabun', 'Tahoma', sans-serif;
            font-size: 14px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            text-align: center;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .nav-tab {
            flex: 1;
            min-width: 200px;
            padding: 15px 20px;
            background: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .nav-tab:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .nav-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .card h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 22px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .form-group label {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .form-group input,
        .form-group select {
            padding: 10px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 14px;
            transition: border 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .assessment-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .assessment-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .question-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
        }
        
        .question-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .question-score {
            background: #3498db;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .option {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .option:hover {
            background: #e3f2fd;
        }
        
        .option.selected {
            background: #d4edda;
            border-color: #28a745;
        }
        
        .option input[type="radio"] {
            margin-right: 10px;
            margin-top: 3px;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-success {
            background: #27ae60;
            color: white;
        }
        
        .btn-warning {
            background: #f39c12;
            color: white;
        }
        
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        
        .btn-secondary {
            background: #95a5a6;
            color: white;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }
        
        .summary-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .summary-item {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 10px;
        }
        
        .summary-item h4 {
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .summary-item .score {
            font-size: 32px;
            font-weight: bold;
        }
        
        .rating-badge {
            display: inline-block;
            padding: 10px 30px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            margin-top: 20px;
            background: white;
            color: #667eea;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .table th {
            background: #34495e;
            color: white;
            font-weight: bold;
        }
        
        .table tr:hover {
            background: #f8f9fa;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .badge-success {
            background: #27ae60;
            color: white;
        }
        
        .badge-warning {
            background: #f39c12;
            color: white;
        }
        
        .badge-danger {
            background: #e74c3c;
            color: white;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 15px;
        }
        
        .modal-header h3 {
            color: #2c3e50;
        }
        
        .close-btn {
            background: #e74c3c;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .nav-tab {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏥 ระบบประเมินหมู่บ้านด้านสิ่งแวดล้อมที่เอื้อต่อสุขภาพ</h1>
            <p>โรงพยาบาลส่งเสริมสุขภาพตำบลบ้านตาหยวก ตำบลทุ่งหลวง อำเภอสุวรรณภูมิ จังหวัดร้อยเอ็ด</p>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('home')">🏠 หน้าหลัก</button>
            <button class="nav-tab" onclick="switchTab('form1')">🦟 ด้านไข้เลือดออก</button>
            <button class="nav-tab" onclick="switchTab('form2')">🌾 ด้านอาหารปลอดภัย</button>
            <button class="nav-tab" onclick="switchTab('form3')">🚿 ด้านห้องน้ำผู้สูงอายุ</button>
            <button class="nav-tab" onclick="switchTab('dashboard')">📊 Dashboard</button>
        </div>

        <!-- Home Tab -->
        <div id="home" class="tab-content active">
            <div class="card">
                <h2>ยินดีต้อนรับสู่ระบบประเมินหมู่บ้าน</h2>
                <div class="alert alert-info">
                    <strong>📌 วิธีการใช้งาน:</strong><br>
                    1. เลือกแท็บด้านบนตามความเชี่ยวชาญของผู้ประเมิน<br>
                    2. กรอกข้อมูลครัวเรือนและผู้ประเมิน<br>
                    3. ประเมินตามเกณฑ์ที่กำหนด<br>
                    4. บันทึกผลการประเมิน<br>
                    5. ดูสรุปผลใน Dashboard
                </div>

                <h3 style="margin-top: 30px; color: #2c3e50;">🎯 แบบประเมินแบ่งออกเป็น 3 หมวด</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div style="background: #ecf0f1; padding: 20px; border-radius: 10px; border-left: 4px solid #e74c3c;">
                        <h4 style="color: #e74c3c; margin-bottom: 10px;">🦟 ด้านที่ 1: การป้องกันโรคไข้เลือดออก</h4>
                        <p style="color: #7f8c8d; font-size: 13px;">ผู้ประเมิน: อสม., เจ้าหน้าที่สาธารณสุข</p>
                        <p style="margin-top: 10px;">คะแนนเต็ม: <strong>40 คะแนน</strong></p>
                    </div>
                    <div style="background: #ecf0f1; padding: 20px; border-radius: 10px; border-left: 4px solid #27ae60;">
                        <h4 style="color: #27ae60; margin-bottom: 10px;">🌾 ด้านที่ 2: ความมั่นคงและความปลอดภัยในอาหาร</h4>
                        <p style="color: #7f8c8d; font-size: 13px;">ผู้ประเมิน: อสม., นักวิชาการเกษตร</p>
                        <p style="margin-top: 10px;">คะแนนเต็ม: <strong>30 คะแนน</strong></p>
                    </div>
                    <div style="background: #ecf0f1; padding: 20px; border-radius: 10px; border-left: 4px solid #3498db;">
                        <h4 style="color: #3498db; margin-bottom: 10px;">🚿 ด้านที่ 3: ห้องน้ำที่เหมาะสมสำหรับผู้สูงอายุ</h4>
                        <p style="color: #7f8c8d; font-size: 13px;">ผู้ประเมิน: อสม., กายภาพบำบัด</p>
                        <p style="margin-top: 10px;">คะแนนเต็ม: <strong>30 คะแนน</strong></p>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="switchTab('form1')">เริ่มประเมินด้านที่ 1</button>
                    <button class="btn btn-success" onclick="switchTab('form2')">เริ่มประเมินด้านที่ 2</button>
                    <button class="btn btn-warning" onclick="switchTab('form3')">เริ่มประเมินด้านที่ 3</button>
                </div>
            </div>
        </div>

        <!-- Form 1: ด้านไข้เลือดออก -->
        <div id="form1" class="tab-content">
            <div class="card">
                <h2>🦟 แบบประเมินด้านที่ 1: การป้องกันโรคไข้เลือดออก (40 คะแนน)</h2>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label>ชื่อหมู่บ้าน *</label>
                        <input type="text" id="form1_villageName" required>
                    </div>
                    <div class="form-group">
                        <label>หมู่ที่ *</label>
                        <input type="text" id="form2_villageNo" required>
                    </div>
                    <div class="form-group">
                        <label>ชื่อเจ้าของบ้าน/ครัวเรือน *</label>
                        <input type="text" id="form2_householder" required>
                    </div>
                    <div class="form-group">
                        <label>ที่อยู่/เลขที่บ้าน</label>
                        <input type="text" id="form2_address">
                    </div>
                    <div class="form-group">
                        <label>วันที่ประเมิน *</label>
                        <input type="date" id="form2_date" required>
                    </div>
                    <div class="form-group">
                        <label>ชื่อผู้ประเมิน *</label>
                        <input type="text" id="form2_assessor" required>
                    </div>
                </div>

                <div class="assessment-section">
                    <h3>2.1 การผลิตอาหารที่ปลอดภัย (10 คะแนน)</h3>
                    
                    <div class="question-card">
                        <div class="question-title">
                            <span>1. การทำเกษตรอินทรีย์หรือลดการใช้สารเคมี</span>
                            <span class="question-score" id="score_2_1_1">0/4</span>
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q_2_1_1" value="4" onchange="calculateForm2()">
                                <span>ดีเยี่ยม (4): ทำเกษตรอินทรีย์ 100% หรือลดสารเคมีมากกว่า 80%</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_2_1_1" value="3" onchange="calculateForm2()">
                                <span>ดี (3): ลดการใช้สารเคมี 60-80%</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_2_1_1" value="2" onchange="calculateForm2()">
                                <span>ปานกลาง (2): ลดการใช้สารเคมี 40-59%</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_2_1_1" value="0" onchange="calculateForm2()">
                                <span>ปรับปรุง (0): ใช้สารเคมีแบบเดิมหรือลดน้อยกว่า 40%</span>
                            </label>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">
                            <span>2. การปลูกผักสวนครัวปลอดสารพิษ</span>
                            <span class="question-score" id="score_2_1_2">0/3</span>
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q_2_1_2" value="3" onchange="calculateForm2()">
                                <span>ดีเยี่ยม (3): มีสวนครัวมากกว่า 70% ของครัวเรือน ปลูกหลากหลาย</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_2_1_2" value="2" onchange="calculateForm2()">
                                <span>ดี (2): มีสวนครัว 50-70% ของครัวเรือน</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_2_1_2" value="1" onchange="calculateForm2()">
                                <span>ปานกลาง (1): มีสวนครัว 30-49% ของครัวเรือน</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_2_1_2" value="0" onchange="calculateForm2()">
                                <span>ปรับปรุง (0): มีสวนครัวน้อยกว่า 30%</span>
                            </label>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">
                            <span>3. การเลี้ยงสัตว์ที่ถูกสุขลักษณะ</span>
                            <span class="question-score" id="score_2_1_3">0/3</span>
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q_2_1_3" value="3" onchange="calculateForm2()">
                                <span>ดีเยี่ยม (3): มีคอกสัตว์ที่ถูกสุขลักษณะ แยกจากที่อยู่อาศัย มีระบบกำจัดของเสีย</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_2_1_3" value="2" onchange="calculateForm2()">
                                <span>ดี (2): มีคอกสัตว์ที่ถูกสุขลักษณะส่วนใหญ่</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_2_1_3" value="1" onchange="calculateForm2()">
                                <span>ปานกลาง (1): มีคอกสัตว์แต่ยังไม่ถูกสุขลักษณะบางส่วน</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_2_1_3" value="0" onchange="calculateForm2()">
                                <span>ปรับปรุง (0): ไม่มีคอกหรือไม่ถูกสุขลักษณะ</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="summary-box">
                    <h3>คะแนนรวมด้านที่ 2</h3>
                    <div class="score" style="font-size: 48px; margin: 20px 0;" id="form2_total">0/30</div>
                    <div class="rating-badge" id="form2_rating">ยังไม่ได้ประเมิน</div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-success" onclick="saveForm2()">💾 บันทึกผลการประเมิน</button>
                    <button class="btn btn-secondary" onclick="resetForm('form2')">🔄 เริ่มใหม่</button>
                </div>
            </div>
        </div>

        <!-- Form 3: ด้านห้องน้ำผู้สูงอายุ -->
        <div id="form3" class="tab-content">
            <div class="card">
                <h2>🚿 แบบประเมินด้านที่ 3: ห้องน้ำที่เหมาะสมสำหรับผู้สูงอายุ (30 คะแนน)</h2>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label>ชื่อหมู่บ้าน *</label>
                        <input type="text" id="form3_villageName" required>
                    </div>
                    <div class="form-group">
                        <label>หมู่ที่ *</label>
                        <input type="text" id="form3_villageNo" required>
                    </div>
                    <div class="form-group">
                        <label>ชื่อเจ้าของบ้าน/ครัวเรือน *</label>
                        <input type="text" id="form3_householder" required>
                    </div>
                    <div class="form-group">
                        <label>ที่อยู่/เลขที่บ้าน</label>
                        <input type="text" id="form3_address">
                    </div>
                    <div class="form-group">
                        <label>วันที่ประเมิน *</label>
                        <input type="date" id="form3_date" required>
                    </div>
                    <div class="form-group">
                        <label>ชื่อผู้ประเมิน *</label>
                        <input type="text" id="form3_assessor" required>
                    </div>
                </div>

                <div class="assessment-section">
                    <h3>3.1 โครงสร้างห้องน้ำที่ปลอดภัย (15 คะแนน)</h3>
                    
                    <div class="question-card">
                        <div class="question-title">
                            <span>1. พื้นห้องน้ำไม่ลื่น</span>
                            <span class="question-score" id="score_3_1_1">0/3</span>
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q_3_1_1" value="3" onchange="calculateForm3()">
                                <span>ดีเยี่ยม (3): พื้นกันลื่น หรือมีแผ่นยางกันลื่นทั้งห้อง</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_3_1_1" value="2" onchange="calculateForm3()">
                                <span>ดี (2): พื้นกันลื่นบางส่วน</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_3_1_1" value="1" onchange="calculateForm3()">
                                <span>ปานกลาง (1): พื้นค่อนข้างลื่น แต่มีมาตรการป้องกัน</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_3_1_1" value="0" onchange="calculateForm3()">
                                <span>ปรับปรุง (0): พื้นลื่น ไม่มีมาตรการป้องกัน</span>
                            </label>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">
                            <span>2. มีราวจับในห้องน้ำและบริเวณโถส้วม</span>
                            <span class="question-score" id="score_3_1_2">0/3</span>
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q_3_1_2" value="3" onchange="calculateForm3()">
                                <span>ดีเยี่ยม (3): มีราวจับครบ (ข้างโถ+อาบน้ำ) ติดตั้งถูกต้อง</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_3_1_2" value="2" onchange="calculateForm3()">
                                <span>ดี (2): มีราวจับ แต่ไม่ครบทุกจุด</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_3_1_2" value="1" onchange="calculateForm3()">
                                <span>ปานกลาง (1): มีราวจับ 1 จุด</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_3_1_2" value="0" onchange="calculateForm3()">
                                <span>ปรับปรุง (0): ไม่มีราวจับ</span>
                            </label>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">
                            <span>3. ประตูห้องน้ำเปิดออกหรือแบบเลื่อน</span>
                            <span class="question-score" id="score_3_1_3">0/3</span>
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q_3_1_3" value="3" onchange="calculateForm3()">
                                <span>ดีเยี่ยม (3): ประตูเปิดออก/เลื่อน กลอนเปิดได้จากภายนอก</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_3_1_3" value="2" onchange="calculateForm3()">
                                <span>ดี (2): ประตูเปิดออก/เลื่อน</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_3_1_3" value="1" onchange="calculateForm3()">
                                <span>ปานกลาง (1): ประตูเปิดเข้า แต่มีพื้นที่เพียงพอ</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_3_1_3" value="0" onchange="calculateForm3()">
                                <span>ปรับปรุง (0): ประตูเปิดเข้า พื้นที่คับแคบ</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="summary-box">
                    <h3>คะแนนรวมด้านที่ 3</h3>
                    <div class="score" style="font-size: 48px; margin: 20px 0;" id="form3_total">0/30</div>
                    <div class="rating-badge" id="form3_rating">ยังไม่ได้ประเมิน</div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-success" onclick="saveForm3()">💾 บันทึกผลการประเมิน</button>
                    <button class="btn btn-secondary" onclick="resetForm('form3')">🔄 เริ่มใหม่</button>
                </div>
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content">
            <div class="card">
                <h2>📊 Dashboard - สรุปผลการประเมิน</h2>
                
                <div class="summary-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin: 20px 0;">
                    <div class="summary-item" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; border-radius: 10px; padding: 20px;">
                        <h4>ด้านไข้เลือดออก</h4>
                        <div class="score" id="dash_form1_count">0</div>
                        <p style="font-size: 12px; opacity: 0.9;">รายการประเมิน</p>
                    </div>
                    <div class="summary-item" style="background: linear-gradient(135deg, #27ae60 0%, #229954 100%); color: white; border-radius: 10px; padding: 20px;">
                        <h4>ด้านอาหารปลอดภัย</h4>
                        <div class="score" id="dash_form2_count">0</div>
                        <p style="font-size: 12px; opacity: 0.9;">รายการประเมิน</p>
                    </div>
                    <div class="summary-item" style="background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; border-radius: 10px; padding: 20px;">
                        <h4>ด้านห้องน้ำผู้สูงอายุ</h4>
                        <div class="score" id="dash_form3_count">0</div>
                        <p style="font-size: 12px; opacity: 0.9;">รายการประเมิน</p>
                    </div>
                    <div class="summary-item" style="background: linear-gradient(135deg, #8e44ad 0%, #7d3c98 100%); color: white; border-radius: 10px; padding: 20px;">
                        <h4>รวมทั้งหมด</h4>
                        <div class="score" id="dash_total_count">0</div>
                        <p style="font-size: 12px; opacity: 0.9;">รายการประเมิน</p>
                    </div>
                </div>

                <div style="margin-top: 30px;">
                    <h3 style="color: #2c3e50; margin-bottom: 15px;">📋 รายการประเมินล่าสุด</h3>
                    <table class="table" id="dashboardTable">
                        <thead>
                            <tr>
                                <th>วันที่</th>
                                <th>หมู่บ้าน</th>
                                <th>เจ้าของบ้าน</th>
                                <th>ด้านที่ประเมิน</th>
                                <th>คะแนน</th>
                                <th>ผู้ประเมิน</th>
                                <th>การจัดการ</th>
                            </tr>
                        </thead>
                        <tbody id="dashboardTableBody">
                            <tr>
                                <td colspan="7" style="text-align: center; color: #7f8c8d;">ยังไม่มีข้อมูลการประเมิน</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="exportAllData()">📥 ส่งออกข้อมูลทั้งหมด</button>
                    <button class="btn btn-warning" onclick="generateReport()">📄 สร้างรายงานสรุป</button>
                    <button class="btn btn-danger" onclick="clearAllData()">🗑️ ล้างข้อมูลทั้งหมด</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Detail View -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>รายละเอียดการประเมิน</h3>
                <button class="close-btn" onclick="closeModal()">×</button>
            </div>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Set default dates
            document.getElementById('form1_date').valueAsDate = new Date();
            document.getElementById('form2_date').valueAsDate = new Date();
            document.getElementById('form3_date').valueAsDate = new Date();
            
            // Load dashboard
            loadDashboard();
            
            // Add event listeners for option selection
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const radio = this.querySelector('input[type="radio"]');
                    if (radio) {
                        radio.checked = true;
                        radio.dispatchEvent(new Event('change'));
                    }
                });
            });
        });

        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'dashboard') {
                loadDashboard();
            }
        }

        // Calculate Form 1
        function calculateForm1() {
            const questions = ['q_1_1_1', 'q_1_1_2', 'q_1_1_3', 'q_1_1_4', 'q_1_1_5'];
            let total = 0;
            
            questions.forEach((q, index) => {
                const selected = document.querySelector(`input[name="${q}"]:checked`);
                const score = selected ? parseInt(selected.value) : 0;
                document.getElementById(`score_${q.substring(2)}`).textContent = `${score}/${[3,3,3,3,3][index]}`;
                total += score;
                
                // Highlight selected option
                document.querySelectorAll(`input[name="${q}"]`).forEach(radio => {
                    const option = radio.closest('.option');
                    if (radio.checked) {
                        option.classList.add('selected');
                    } else {
                        option.classList.remove('selected');
                    }
                });
            });
            
            document.getElementById('form1_total').textContent = `${total}/40`;
            updateRating('form1', total, 40);
        }

        // Calculate Form 2
        function calculateForm2() {
            const questions = ['q_2_1_1', 'q_2_1_2', 'q_2_1_3'];
            let total = 0;
            
            questions.forEach((q, index) => {
                const selected = document.querySelector(`input[name="${q}"]:checked`);
                const score = selected ? parseInt(selected.value) : 0;
                document.getElementById(`score_${q.substring(2)}`).textContent = `${score}/${[4,3,3][index]}`;
                total += score;
                
                document.querySelectorAll(`input[name="${q}"]`).forEach(radio => {
                    const option = radio.closest('.option');
                    if (radio.checked) {
                        option.classList.add('selected');
                    } else {
                        option.classList.remove('selected');
                    }
                });
            });
            
            document.getElementById('form2_total').textContent = `${total}/30`;
            updateRating('form2', total, 30);
        }

        // Calculate Form 3
        function calculateForm3() {
            const questions = ['q_3_1_1', 'q_3_1_2', 'q_3_1_3'];
            let total = 0;
            
            questions.forEach((q, index) => {
                const selected = document.querySelector(`input[name="${q}"]:checked`);
                const score = selected ? parseInt(selected.value) : 0;
                document.getElementById(`score_${q.substring(2)}`).textContent = `${score}/${[3,3,3][index]}`;
                total += score;
                
                document.querySelectorAll(`input[name="${q}"]`).forEach(radio => {
                    const option = radio.closest('.option');
                    if (radio.checked) {
                        option.classList.add('selected');
                    } else {
                        option.classList.remove('selected');
                    }
                });
            });
            
            document.getElementById('form3_total').textContent = `${total}/30`;
            updateRating('form3', total, 30);
        }

        // Update rating
        function updateRating(form, score, maxScore) {
            const percentage = (score / maxScore) * 100;
            const badge = document.getElementById(`${form}_rating`);
            
            if (percentage >= 90) {
                badge.textContent = '⭐⭐⭐⭐⭐ ดีเยี่ยม';
                badge.style.background = '#27ae60';
            } else if (percentage >= 80) {
                badge.textContent = '⭐⭐⭐⭐ ดีมาก';
                badge.style.background = '#2ecc71';
            } else if (percentage >= 70) {
                badge.textContent = '⭐⭐⭐ ดี';
                badge.style.background = '#3498db';
            } else if (percentage >= 60) {
                badge.textContent = '⭐⭐ ปานกลาง';
                badge.style.background = '#f39c12';
            } else if (score > 0) {
                badge.textContent = '⭐ ปรับปรุง';
                badge.style.background = '#e74c3c';
            } else {
                badge.textContent = 'ยังไม่ได้ประเมิน';
                badge.style.background = 'white';
                badge.style.color = '#667eea';
            }
        }

        // Save Form 1
        function saveForm1() {
            const data = {
                type: 'form1',
                typeName: 'ด้านไข้เลือดออก',
                villageName: document.getElementById('form1_villageName').value,
                villageNo: document.getElementById('form1_villageNo').value,
                householder: document.getElementById('form1_householder').value,
                address: document.getElementById('form1_address').value,
                date: document.getElementById('form1_date').value,
                assessor: document.getElementById('form1_assessor').value,
                score: document.getElementById('form1_total').textContent,
                rating: document.getElementById('form1_rating').textContent,
                timestamp: new Date().toISOString()
            };
            
            if (!data.villageName || !data.villageNo || !data.householder || !data.date || !data.assessor) {
                alert('⚠️ กรุณากรอกข้อมูลให้ครบถ้วน!');
                return;
            }
            
            const assessments = JSON.parse(localStorage.getItem('assessments') || '[]');
            assessments.push(data);
            localStorage.setItem('assessments', JSON.stringify(assessments));
            
            alert('✅ บันทึกผลการประเมินเรียบร้อยแล้ว!');
            resetForm('form3');
            switchTab('dashboard');
        }

        // Reset Form
        function resetForm(formName) {
            if (confirm('⚠️ คุณต้องการล้างข้อมูลและเริ่มใหม่ใช่หรือไม่?')) {
                // Clear all radio buttons
                document.querySelectorAll(`#${formName} input[type="radio"]`).forEach(radio => {
                    radio.checked = false;
                });
                
                // Clear all inputs
                document.querySelectorAll(`#${formName} input[type="text"], #${formName} input[type="date"]`).forEach(input => {
                    if (input.type === 'date') {
                        input.valueAsDate = new Date();
                    } else {
                        input.value = '';
                    }
                });
                
                // Remove selected class
                document.querySelectorAll(`#${formName} .option`).forEach(option => {
                    option.classList.remove('selected');
                });
                
                // Reset scores
                if (formName === 'form1') calculateForm1();
                if (formName === 'form2') calculateForm2();
                if (formName === 'form3') calculateForm3();
            }
        }

        // Load Dashboard
        function loadDashboard() {
            const assessments = JSON.parse(localStorage.getItem('assessments') || '[]');
            
            // Count by type
            const form1Count = assessments.filter(a => a.type === 'form1').length;
            const form2Count = assessments.filter(a => a.type === 'form2').length;
            const form3Count = assessments.filter(a => a.type === 'form3').length;
            
            document.getElementById('dash_form1_count').textContent = form1Count;
            document.getElementById('dash_form2_count').textContent = form2Count;
            document.getElementById('dash_form3_count').textContent = form3Count;
            document.getElementById('dash_total_count').textContent = assessments.length;
            
            // Load table
            const tbody = document.getElementById('dashboardTableBody');
            
            if (assessments.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #7f8c8d;">ยังไม่มีข้อมูลการประเมิน</td></tr>';
                return;
            }
            
            // Sort by date descending
            assessments.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            tbody.innerHTML = assessments.map((item, index) => {
                const score = parseInt(item.score.split('/')[0]);
                const maxScore = parseInt(item.score.split('/')[1]);
                const percentage = (score / maxScore) * 100;
                
                let badgeClass = 'badge-danger';
                if (percentage >= 80) badgeClass = 'badge-success';
                else if (percentage >= 60) badgeClass = 'badge-warning';
                
                return `
                    <tr>
                        <td>${new Date(item.date).toLocaleDateString('th-TH')}</td>
                        <td>${item.villageName} หมู่ ${item.villageNo}</td>
                        <td>${item.householder}</td>
                        <td>${item.typeName}</td>
                        <td><span class="badge ${badgeClass}">${item.score}</span></td>
                        <td>${item.assessor}</td>
                        <td>
                            <button class="btn btn-primary" style="padding: 5px 10px; font-size: 12px;" onclick="viewDetail(${index})">👁️ ดู</button>
                            <button class="btn btn-danger" style="padding: 5px 10px; font-size: 12px;" onclick="deleteAssessment(${index})">🗑️</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // View Detail
        function viewDetail(index) {
            const assessments = JSON.parse(localStorage.getItem('assessments') || '[]');
            const item = assessments[index];
            
            const modalBody = document.getElementById('modalBody');
            modalBody.innerHTML = `
                <div style="display: grid; gap: 15px;">
                    <div><strong>หมู่บ้าน:</strong> ${item.villageName} หมู่ ${item.villageNo}</div>
                    <div><strong>เจ้าของบ้าน:</strong> ${item.householder}</div>
                    <div><strong>ที่อยู่:</strong> ${item.address || '-'}</div>
                    <div><strong>วันที่ประเมิน:</strong> ${new Date(item.date).toLocaleDateString('th-TH')}</div>
                    <div><strong>ผู้ประเมิน:</strong> ${item.assessor}</div>
                    <div><strong>ด้านที่ประเมิน:</strong> ${item.typeName}</div>
                    <div><strong>คะแนน:</strong> ${item.score}</div>
                    <div><strong>ผลการประเมิน:</strong> ${item.rating}</div>
                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="printDetail(${index})">🖨️ พิมพ์</button>
                        <button class="btn btn-secondary" onclick="closeModal()">ปิด</button>
                    </div>
                </div>
            `;
            
            document.getElementById('detailModal').classList.add('active');
        }

        // Close Modal
        function closeModal() {
            document.getElementById('detailModal').classList.remove('active');
        }

        // Delete Assessment
        function deleteAssessment(index) {
            if (confirm('⚠️ คุณต้องการลบรายการนี้ใช่หรือไม่?')) {
                const assessments = JSON.parse(localStorage.getItem('assessments') || '[]');
                assessments.splice(index, 1);
                localStorage.setItem('assessments', JSON.stringify(assessments));
                loadDashboard();
                alert('✅ ลบรายการเรียบร้อยแล้ว');
            }
        }

        // Print Detail
        function printDetail(index) {
            const assessments = JSON.parse(localStorage.getItem('assessments') || '[]');
            const item = assessments[index];
            
            const printWindow = window.open('', '', 'width=800,height=600');
            printWindow.document.write(`
                <html>
                <head>
                    <title>รายงานการประเมิน</title>
                    <style>
                        body { font-family: 'Sarabun', Arial, sans-serif; padding: 40px; }
                        h1 { color: #2c3e50; text-align: center; }
                        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
                        th { background: #34495e; color: white; }
                    </style>
                </head>
                <body>
                    <h1>รายงานการประเมินหมู่บ้าน</h1>
                    <h3>รพ.สต.บ้านตาหยวก ตำบลทุ่งหลวง อำเภอสุวรรณภูมิ จังหวัดร้อยเอ็ด</h3>
                    <table>
                        <tr><th>รายการ</th><th>ข้อมูล</th></tr>
                        <tr><td>หมู่บ้าน</td><td>${item.villageName} หมู่ ${item.villageNo}</td></tr>
                        <tr><td>เจ้าของบ้าน</td><td>${item.householder}</td></tr>
                        <tr><td>ที่อยู่</td><td>${item.address || '-'}</td></tr>
                        <tr><td>วันที่ประเมิน</td><td>${new Date(item.date).toLocaleDateString('th-TH')}</td></tr>
                        <tr><td>ผู้ประเมิน</td><td>${item.assessor}</td></tr>
                        <tr><td>ด้านที่ประเมิน</td><td>${item.typeName}</td></tr>
                        <tr><td>คะแนน</td><td><strong>${item.score}</strong></td></tr>
                        <tr><td>ผลการประเมิน</td><td><strong>${item.rating}</strong></td></tr>
                    </table>
                    <script>
                        window.onload = function() { window.print(); }
                    </script>
                </body>
                </html>
            `);
            printWindow.document.close();
        }

        // Export All Data
        function exportAllData() {
            const assessments = JSON.parse(localStorage.getItem('assessments') || '[]');
            
            if (assessments.length === 0) {
                alert('⚠️ ไม่มีข้อมูลให้ส่งออก');
                return;
            }
            
            // Create CSV
            let csv = 'วันที่,หมู่บ้าน,หมู่ที่,เจ้าของบ้าน,ที่อยู่,ด้านที่ประเมิน,คะแนน,ผลการประเมิน,ผู้ประเมิน\n';
            
            assessments.forEach(item => {
                csv += `${item.date},"${item.villageName}","${item.villageNo}","${item.householder}","${item.address || '-'}","${item.typeName}","${item.score}","${item.rating}","${item.assessor}"\n`;
            });
            
            // Download
            const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `รายงานการประเมิน_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            alert('✅ ส่งออกข้อมูลเรียบร้อยแล้ว');
        }

        // Generate Report
        function generateReport() {
            const assessments = JSON.parse(localStorage.getItem('assessments') || '[]');
            
            if (assessments.length === 0) {
                alert('⚠️ ไม่มีข้อมูลสร้างรายงาน');
                return;
            }
            
            // Group by village
            const villages = {};
            assessments.forEach(item => {
                const key = `${item.villageName}_${item.villageNo}`;
                if (!villages[key]) {
                    villages[key] = {
                        name: item.villageName,
                        no: item.villageNo,
                        assessments: []
                    };
                }
                villages[key].assessments.push(item);
            });
            
            // Create report window
            const reportWindow = window.open('', '', 'width=900,height=700');
            reportWindow.document.write(`
                <html>
                <head>
                    <title>รายงานสรุปผลการประเมิน</title>
                    <style>
                        body { font-family: 'Sarabun', Arial, sans-serif; padding: 40px; }
                        h1 { color: #2c3e50; text-align: center; }
                        h2 { color: #34495e; margin-top: 30px; }
                        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
                        th, td { padding: 8px; text-align: left; border: 1px solid #ddd; }
                        th { background: #34495e; color: white; }
                        .summary { background: #ecf0f1; padding: 15px; border-radius: 5px; margin: 20px 0; }
                    </style>
                </head>
                <body>
                    <h1>รายงานสรุปผลการประเมินหมู่บ้าน</h1>
                    <h3 style="text-align: center;">รพ.สต.บ้านตาหยวก ตำบลทุ่งหลวง อำเภอสุวรรณภูมิ จังหวัดร้อยเอ็ด</h3>
                    <div class="summary">
                        <strong>จำนวนรายการประเมินทั้งหมด:</strong> ${assessments.length} รายการ<br>
                        <strong>จำนวนหมู่บ้าน:</strong> ${Object.keys(villages).length} หมู่บ้าน<br>
                        <strong>วันที่สร้างรายงาน:</strong> ${new Date().toLocaleDateString('th-TH')}
                    </div>
                    ${Object.values(villages).map(village => `
                        <h2>${village.name} หมู่ ${village.no}</h2>
                        <table>
                            <tr>
                                <th>วันที่</th>
                                <th>เจ้าของบ้าน</th>
                                <th>ด้านที่ประเมิน</th>
                                <th>คะแนน</th>
                                <th>ผลการประเมิน</th>
                            </tr>
                            ${village.assessments.map(item => `
                                <tr>
                                    <td>${new Date(item.date).toLocaleDateString('th-TH')}</td>
                                    <td>${item.householder}</td>
                                    <td>${item.typeName}</td>
                                    <td>${item.score}</td>
                                    <td>${item.rating}</td>
                                </tr>
                            `).join('')}
                        </table>
                    `).join('')}
                    <button onclick="window.print()" style="margin-top: 30px; padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer;">🖨️ พิมพ์รายงาน</button>
                </body>
                </html>
            `);
            reportWindow.document.close();
        }

        // Clear All Data
        function clearAllData() {
            if (confirm('⚠️ คุณต้องการลบข้อมูลทั้งหมดใช่หรือไม่?\n\nการดำเนินการนี้ไม่สามารถย้อนกลับได้!')) {
                if (confirm('⚠️⚠️ ยืนยันอีกครั้ง: ลบข้อมูลทั้งหมด?')) {
                    localStorage.removeItem('assessments');
                    loadDashboard();
                    alert('✅ ลบข้อมูลทั้งหมดเรียบร้อยแล้ว');
                }
            }
        }

        // Close modal when clicking outside
        document.getElementById('detailModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>alert('⚠️ กรุณากรอกข้อมูลให้ครบถ้วน!');
                return;
            }
            
            const assessments = JSON.parse(localStorage.getItem('assessments') || '[]');
            assessments.push(data);
            localStorage.setItem('assessments', JSON.stringify(assessments));
            
            alert('✅ บันทึกผลการประเมินเรียบร้อยแล้ว!');
            resetForm('form1');
            switchTab('dashboard');
        }

        // Save Form 2
        function saveForm2() {
            const data = {
                type: 'form2',
                typeName: 'ด้านอาหารปลอดภัย',
                villageName: document.getElementById('form2_villageName').value,
                villageNo: document.getElementById('form2_villageNo').value,
                householder: document.getElementById('form2_householder').value,
                address: document.getElementById('form2_address').value,
                date: document.getElementById('form2_date').value,
                assessor: document.getElementById('form2_assessor').value,
                score: document.getElementById('form2_total').textContent,
                rating: document.getElementById('form2_rating').textContent,
                timestamp: new Date().toISOString()
            };
            
            if (!data.villageName || !data.villageNo || !data.householder || !data.date || !data.assessor) {
                alert('⚠️ กรุณากรอกข้อมูลให้ครบถ้วน!');
                return;
            }
            
            const assessments = JSON.parse(localStorage.getItem('assessments') || '[]');
            assessments.push(data);
            localStorage.setItem('assessments', JSON.stringify(assessments));
            
            alert('✅ บันทึกผลการประเมินเรียบร้อยแล้ว!');
            resetForm('form2');
            switchTab('dashboard');
        }

        // Save Form 3
        function saveForm3() {
            const data = {
                type: 'form3',
                typeName: 'ด้านห้องน้ำผู้สูงอายุ',
                villageName: document.getElementById('form3_villageName').value,
                villageNo: document.getElementById('form3_villageNo').value,
                householder: document.getElementById('form3_householder').value,
                address: document.getElementById('form3_address').value,
                date: document.getElementById('form3_date').value,
                assessor: document.getElementById('form3_assessor').value,
                score: document.getElementById('form3_total').textContent,
                rating: document.getElementById('form3_rating').textContent,
                timestamp: new Date().toISOString()
            };
            
            if (!data.villageName || !data.villageNo || !data.householder || !data.date || !data.assessor) {
                 *</label>
                        <input type="text" id="form1_villageNo" required>
                    </div>
                    <div class="form-group">
                        <label>ชื่อเจ้าของบ้าน/ครัวเรือน *</label>
                        <input type="text" id="form1_householder" required>
                    </div>
                    <div class="form-group">
                        <label>ที่อยู่/เลขที่บ้าน</label>
                        <input type="text" id="form1_address">
                    </div>
                    <div class="form-group">
                        <label>วันที่ประเมิน *</label>
                        <input type="date" id="form1_date" required>
                    </div>
                    <div class="form-group">
                        <label>ชื่อผู้ประเมิน *</label>
                        <input type="text" id="form1_assessor" required>
                    </div>
                </div>

                <div class="assessment-section">
                    <h3>1.1 การกำจัดแหล่งเพาะพันธุ์ยุงลาย (15 คะแนน)</h3>
                    
                    <div class="question-card">
                        <div class="question-title">
                            <span>1. การกำจัดภาชนะขังน้ำที่ไม่จำเป็น</span>
                            <span class="question-score" id="score_1_1_1">0/3</span>
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q_1_1_1" value="3" onchange="calculateForm1()">
                                <span>ดีเยี่ยม (3): ไม่พบภาชนะที่ไม่จำเป็นเลย</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_1" value="2" onchange="calculateForm1()">
                                <span>ดี (2): พบภาชนะไม่เกิน 2 ชิ้น</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_1" value="1" onchange="calculateForm1()">
                                <span>ปานกลาง (1): พบภาชนะ 3-5 ชิ้น</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_1" value="0" onchange="calculateForm1()">
                                <span>ปรับปรุง (0): พบมากกว่า 5 ชิ้น</span>
                            </label>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">
                            <span>2. การคว่ำภาชนะที่ไม่ได้ใช้งาน</span>
                            <span class="question-score" id="score_1_1_2">0/3</span>
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q_1_1_2" value="3" onchange="calculateForm1()">
                                <span>ดีเยี่ยม (3): คว่ำภาชนะทั้งหมด 100%</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_2" value="2" onchange="calculateForm1()">
                                <span>ดี (2): คว่ำภาชนะ 70-99%</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_2" value="1" onchange="calculateForm1()">
                                <span>ปานกลาง (1): คว่ำภาชนะ 50-69%</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_2" value="0" onchange="calculateForm1()">
                                <span>ปรับปรุง (0): คว่ำน้อยกว่า 50%</span>
                            </label>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">
                            <span>3. การปิดฝาภาชนะเก็บน้ำอย่างมิดชิด</span>
                            <span class="question-score" id="score_1_1_3">0/3</span>
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q_1_1_3" value="3" onchange="calculateForm1()">
                                <span>ดีเยี่ยม (3): ปิดฝามิดชิดทุกภาชนะ</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_3" value="2" onchange="calculateForm1()">
                                <span>ดี (2): ปิดฝา 80-99%</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_3" value="1" onchange="calculateForm1()">
                                <span>ปานกลาง (1): ปิดฝา 60-79%</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_3" value="0" onchange="calculateForm1()">
                                <span>ปรับปรุง (0): ปิดฝาน้อยกว่า 60%</span>
                            </label>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">
                            <span>4. การทำความสะอาดภาชนะเก็บน้ำทุกสัปดาห์</span>
                            <span class="question-score" id="score_1_1_4">0/3</span>
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q_1_1_4" value="3" onchange="calculateForm1()">
                                <span>ดีเยี่ยม (3): ทำความสะอาดทุกสัปดาห์อย่างสม่ำเสมอ มีการบันทึก</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_4" value="2" onchange="calculateForm1()">
                                <span>ดี (2): ทำความสะอาดทุกสัปดาห์</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_4" value="1" onchange="calculateForm1()">
                                <span>ปานกลาง (1): ทำความสะอาด 2 สัปดาห์/ครั้ง</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_4" value="0" onchange="calculateForm1()">
                                <span>ปรับปรุง (0): ไม่แน่นอนหรือนานกว่า 2 สัปดาห์</span>
                            </label>
                        </div>
                    </div>

                    <div class="question-card">
                        <div class="question-title">
                            <span>5. การใส่ทรายหรือปลากินลูกน้ำยุง</span>
                            <span class="question-score" id="score_1_1_5">0/3</span>
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q_1_1_5" value="3" onchange="calculateForm1()">
                                <span>ดีเยี่ยม (3): ใช้ทรายอะเบทหรือปลาทุกภาชนะที่ไม่สามารถเปลี่ยนน้ำได้</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_5" value="2" onchange="calculateForm1()">
                                <span>ดี (2): ใช้ในภาชนะส่วนใหญ่ 70-99%</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_5" value="1" onchange="calculateForm1()">
                                <span>ปานกลาง (1): ใช้บางภาชนะ 50-69%</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q_1_1_5" value="0" onchange="calculateForm1()">
                                <span>ปรับปรุง (0): ไม่ใช้หรือใช้น้อยกว่า 50%</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="summary-box">
                    <h3>คะแนนรวมด้านที่ 1</h3>
                    <div class="score" style="font-size: 48px; margin: 20px 0;" id="form1_total">0/40</div>
                    <div class="rating-badge" id="form1_rating">ยังไม่ได้ประเมิน</div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-success" onclick="saveForm1()">💾 บันทึกผลการประเมิน</button>
                    <button class="btn btn-secondary" onclick="resetForm('form1')">🔄 เริ่มใหม่</button>
                </div>
            </div>
        </div>

        <!-- Form 2: ด้านอาหารปลอดภัย -->
        <div id="form2" class="tab-content">
            <div class="card">
                <h2>🌾 แบบประเมินด้านที่ 2: ความมั่นคงและความปลอดภัยในอาหาร (30 คะแนน)</h2>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label>ชื่อหมู่บ้าน *</label>
                        <input type="text" id="form2_villageName" required>
                    </div>
                    <div class="form-group">
                        <label>หมู่ที่